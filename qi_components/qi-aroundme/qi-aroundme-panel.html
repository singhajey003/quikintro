<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-scroll-header-panel/core-scroll-header-panel.html">

<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/core-field/core-field.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../bower_components/core-icons/communication-icons.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/google-map/google-map.html">


<link rel="import" href="qi-aroundme-card.html">

<polymer-element name="qi-aroundme-panel">
  <template>

  <link rel="stylesheet" href="../quikintro.css">
  <link rel="stylesheet" href="qi-aroundme-panel.css">

  <core-ajax auto url="../data/contacts.json" response="{{response}}" handleAs="json"></core-ajax>

	<core-scroll-header-panel headermargin="128" fixed headerheight="192" id="eventHeaderPanel" >
    <core-toolbar fixed>
      <div flex>Around Me</div>
    </core-toolbar>

    <div class="content" layout vertical>
      
      <div class="maps-panel">
        <google-map id="map" zoom="12" style="width:400px; height: 400px" libraries="visualization" fitToMarkers >
          <google-map-marker latitude="37.779" longitude="-122.3892">
          </google-map-marker>
        </google-map>
      </div>


      <core-toolbar fixed>
        <div flex>Contacts</div>
      </core-toolbar>
      <template repeat="{{contact in response}}">
        <qi-contact-card contact="{{contact}}"></qi-contact-card>
      </template>

    </div>


     </core-scroll-header-panel>
   </template>

   <script>
	Polymer('qi-aroundme-panel',{
    ready: function(evt){
      this.heatMap();
    },
    heatMap: function(){
        var map = this.$.map; // google map web component

        map.addEventListener('api-load', function(e) {
          var gmap = map.map;   // google.maps.Map instance

          var testData = [
              new google.maps.LatLng(37.782551, -122.445368),
              new google.maps.LatLng(37.782745, -122.444586),
              new google.maps.LatLng(37.782842, -122.443688),
              new google.maps.LatLng(37.782919, -122.442815),
              new google.maps.LatLng(37.782992, -122.442112),
              new google.maps.LatLng(37.783100, -122.441461),
              new google.maps.LatLng(37.783206, -122.440829),
              new google.maps.LatLng(37.783273, -122.440324),
              new google.maps.LatLng(37.783316, -122.440023),
              new google.maps.LatLng(37.783357, -122.439794),
              new google.maps.LatLng(37.783371, -122.439687),
              new google.maps.LatLng(37.783368, -122.439666),
              new google.maps.LatLng(37.783383, -122.439594),
              new google.maps.LatLng(37.783508, -122.439525),
              new google.maps.LatLng(37.783842, -122.439591),
              new google.maps.LatLng(37.784147, -122.439668),
              new google.maps.LatLng(37.784206, -122.439686),
              new google.maps.LatLng(37.784386, -122.439790),
              new google.maps.LatLng(37.784701, -122.439902),
              new google.maps.LatLng(37.784965, -122.439938),
              new google.maps.LatLng(37.785010, -122.439947),
              new google.maps.LatLng(37.785360, -122.439952),
              new google.maps.LatLng(37.785715, -122.440030),
              new google.maps.LatLng(37.786117, -122.440119),
              new google.maps.LatLng(37.786564, -122.440209),
              new google.maps.LatLng(37.786905, -122.440270),
              new google.maps.LatLng(37.786956, -122.440279),
              new google.maps.LatLng(37.800224, -122.433520),
              new google.maps.LatLng(37.800155, -122.434101),
              new google.maps.LatLng(37.800160, -122.434430),
              new google.maps.LatLng(37.800378, -122.434527),
              new google.maps.LatLng(37.800738, -122.434598),
              new google.maps.LatLng(37.800938, -122.434650),
              new google.maps.LatLng(37.801024, -122.434889),
              new google.maps.LatLng(37.800955, -122.435392),
              new google.maps.LatLng(37.800886, -122.435959),
              new google.maps.LatLng(37.800811, -122.436275),
              new google.maps.LatLng(37.800788, -122.436299),
              new google.maps.LatLng(37.800719, -122.436302),
              new google.maps.LatLng(37.800702, -122.436298),
              new google.maps.LatLng(37.800661, -122.436273),
              new google.maps.LatLng(37.800395, -122.436172),
              new google.maps.LatLng(37.800228, -122.436116),
              new google.maps.LatLng(37.800169, -122.436130),
              new google.maps.LatLng(37.800066, -122.436167),
              new google.maps.LatLng(37.784345, -122.422922),
              new google.maps.LatLng(37.784389, -122.422926),
              new google.maps.LatLng(37.784437, -122.422924),
              new google.maps.LatLng(37.784746, -122.422818),
              new google.maps.LatLng(37.785436, -122.422959),
              new google.maps.LatLng(37.786120, -122.423112),
              new google.maps.LatLng(37.786433, -122.423029),
              new google.maps.LatLng(37.786631, -122.421213),
              new google.maps.LatLng(37.786660, -122.421033),
              new google.maps.LatLng(37.786801, -122.420141),
              new google.maps.LatLng(37.786823, -122.420034),
              new google.maps.LatLng(37.786831, -122.419916),
              new google.maps.LatLng(37.787034, -122.418208),
              new google.maps.LatLng(37.787056, -122.418034)
            ];

          var pointArray = new google.maps.MVCArray(testData);

          //console.log(pointArray);

          heatmap = new google.maps.visualization.HeatmapLayer({
            data: pointArray
          });

          //console.log(heatmap);

          heatmap.setMap(gmap);
        });
        
          
    }
  
		
	});

   </script>

</polymer-element>