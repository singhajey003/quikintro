
<link rel="import" href="qi-event-card.html">
<link rel="import" href="qi-event-detail.html">
<link rel="import" href="qi-event-notice.html">

<polymer-element name="qi-event-stream" >

	<template>

		<style>
			
			.container{padding: 20px;}
		</style>
		<div class="container">
		<core-ajax auto url="../data/notices.json" response="{{notifications}}" handleAs="json"></core-ajax>
		<core-ajax auto url="../data/events.json" response="{{events}}" handleAs="json"></core-ajax>
		<core-pages selected="{{selected}}">
		  <section>
		<div layout vertical flex>
		<label>Notifications</label>
		<div>
			<template repeat="{{notice in notifications}}">
				<qi-event-notice notice="{{notice}}">{{notice.text}}</qi-event-notice>
			</template>
		</div>

		<label>My Scheduled Events</label>
		<div>
			<template repeat="{{event, i in events }}">
				<qi-event-card id="{{i}}" event="{{event}}" on-click="{{cardClickHandler}}"></qi-event-card>
			</template>
		</div>
		</div>
		</section>

		<section>
			<qi-event-detail></qi-event-detail>
		</section>
		</div>
		</core-pages>
	</template>

	<script>
		Polymer('qi-event-stream',{
			selected:0,
			cardClickHandler: function(){
				var detail = document.querySelector("qi-event-detail");
				var event = this.events[detail.id]

				console.log(event);
			}

		});


	</script>



</polymer-element>