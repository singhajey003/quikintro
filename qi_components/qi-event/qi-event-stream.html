
<link rel="import" href="qi-event-card.html">
<link rel="import" href="qi-event-detail.html">
<link rel="import" href="qi-event-notice.html">

<polymer-element name="qi-event-stream" >

	<template>

		<style>	
			.container{padding: 20px;}
		</style>

		<core-ajax auto url="../data/notices.json" response="{{notifications}}" handleAs="json"></core-ajax>
		<core-ajax auto url="../data/events.json" response="{{events}}" handleAs="json"></core-ajax>

		<div class="container">

		<core-pages selected="{{selectedEventPage}}">
		  <section>
			<div layout vertical flex>
			<label>Notifications</label>
			<div>
				<template repeat="{{notice in notifications}}">
					<qi-event-notice notice="{{notice}}">{{notice.text}}</qi-event-notice>
				</template>
			</div>

			<label>My Scheduled Events</label>
			<div>
				<template repeat="{{event, i in events }}">
					<qi-event-card id="{{i}}" event="{{event}}" on-click="{{cardClickHandler}}"></qi-event-card>
				</template>
			</div>
			</div>
		 </section>

		<section>
			<qi-event-detail id="detail"></qi-event-detail>
		</section>
		</div>
		</core-pages>
	</template>

	<script>
		Polymer('qi-event-stream',{
			selectedEventPage:0,
			cardClickHandler: function(e){
				var event = e.srcElement.event;
				var detail = this.$.detail;
				detail.event = event;
				console.log(event);
				this.selectedEventPage = 1;
			}

		});


	</script>



</polymer-element>