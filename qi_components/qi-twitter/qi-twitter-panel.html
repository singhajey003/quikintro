<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"> 
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">

<link rel="import" href="../qi-dialog/qi-twitter-dialog.html">

<link rel="import" href="qi-twitter-card.html">
<dom-module id='qi-twitter-panel'  > <!-- CONVERTED WIP -->

  <style>
  </style> <!-- TODO Move style tags here from <template> if needed CONVERTED WIP -->


	<template>
	<style>
	
	paper-toolbar{
		max-height: 30px;
	}

	paper-toolbar > div{
		max-height: 28px;
		padding-top: 2px;
	}
	.label{
		font-size: 12pt;
		font-weight: bold;
		margin-right: 5px;
		color: #6c6c6c;
	}
	.value{
		font-size: 10pt;
		padding-top: 3px;
		color: #5C9AA9;
	}
	</style>

	<iron-ajax
	  auto
	  url="{{dataUrl}}"
	  handle-as="json"
	  response="{{response}}"></iron-ajax>
 <!-- TODO iron-ajax check url and params embed binding {{}} and params quotes  CONVERTED WIP -->  

	<paper-header-panel class="flex fit"> 

	  <paper-toolbar middle>
		<div  ><div class="label">Event Hashtag:</div> <div class="value flex fit layout horizontal">{{hashtag}}</div></div>   
	  </paper-toolbar>

	  <div class="content layout vertical flex fit"  >  
		  <div style="overflow: auto">
			  <template is="dom-repeat" items="{{response.statuses}}"  as="tweet">
      
			  	<qi-twitter-card tweet="{{tweet}}"></qi-twitter-card>
			  </template>
		  </div>

		  <div style="min-height: 60px; background-color: rgba(0,0,0,0.0)" fixed >
		  	 <paper-fab icon="create" mini="true" on-click="openDialog"></paper-fab> 
		  </div>

		 <qi-twitter-dialog id="twitterDialog" hashtag="{{hashtag}}"></qi-twitter-dialog>
		 
	</div>
	</paper-header-panel>

	</template>


	<script>
		Polymer({
    		is: 'qi-twitter-panel', // CONVERTED WIP 

    		properties:{
    			dataUrl: {type: String},
    			hashtag: {type: String}
    		},

			ready: function(){
				this.addEventListener('openTweetDialog', function(){
					this.$.twitterDialog.open();
				});
			},

			openDialog: function(){
				this.$.twitterDialog.open();
			}
		
		});

	</script>

</dom-module> <!-- CONVERTED -->

<!-- CONVERSION NOTES TODO:
 Review code and look for: 
 - textContent binding from <div>First: {{first}}</div> TO First <span>{{first}}</span><br>
 - polymer-element default attributes such as tabindex="0" move to hostAttributes: {  tabindex: 0}
 - custom elements correct JSON quotes required, change from <my-element foo="{ 'title': 'Persuasion', 'author': 'Austen' }"> to </my-element> to <my-element foo="{ "title": "Persuasion", "author": "Austen" }"></my-element>
 - custom elements attribute use dash-case not camelCase, change from  <my-element fooBar= to <my-element foo-bar
 - Polymer( fix mixins use Behaviors after is: see https://www.polymer-project.org/1.0/docs/devguide/behaviors.html
 - Check layout attributes replaced by layout classes <div layout horizontal center>` to `<div class="layout horizontal center">, 
 - Cleanup class= 
 - Convert core- to iron- or paper- replacement elements at PolymerElements
 - Remove unresolved from <body> tag
 - Cleanup iron-ajax params url for embedded bindings {{}}
 - iron-ajax replace this.$.xxx_ajax.abort(); and this.$.xxx_ajax.go(); with this.$.xxx_ajax.generateRequest() 
 - Fix iron-list if needed 
 - Fix indentation as need 
 - Cleanup Comments to reflect changes ,
 - see https://www.polymer-project.org/1.0/docs/migration.html
   -->