<link rel="import" href="../../bower_components/paper-input/paper-autogrow-textarea.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">

<link rel="import" href="../qi-dialog/qi-twitter-dialog.html">

<link rel="import" href="qi-twitter-card.html">
<polymer-element name="qi-twitter-panel" attributes="dataUrl hashtag">

	<template>
	<style>
	
	core-toolbar{
		max-height: 30px;
	}

	core-toolbar > div{
		max-height: 28px;
		padding-top: 2px;
	}
	.label{
		font-size: 12pt;
		font-weight: bold;
		margin-right: 5px;
		color: #6c6c6c;
	}
	.value{
		font-size: 10pt;
		padding-top: 3px;
		color: #5C9AA9;
	}
	</style>

	<core-ajax
	  auto
	  url="{{dataUrl}}"
	  handleAs="json"
	  response="{{response}}"></core-ajax>

	<core-header-panel flex fit>

	  <core-toolbar middle>
		<div flex fit layout horizontal ><div class="label">Event Hashtag:</div> <div class="value">{{hashtag}}</div></div>
	  </core-toolbar>

	  <div class="content" layout vertical flex fit >
		  <div style="overflow: auto">
			  <template repeat="{{tweet in response.statuses}}">
			  	<qi-twitter-card tweet="{{tweet}}"></qi-twitter-card>
			  </template>
		  </div>

		  <div style="min-height: 60px; background-color: rgba(0,0,0,0.0)" fixed >
		  	 <paper-fab icon="create" mini="true" on-click="{{openDialog}}"></paper-fab>
		  </div>

		 <qi-twitter-dialog id="twitterDialog" hashtag="{{hashtag}}"></qi-twitter-dialog>
		 
	</div>
	</core-header-panel>

	</template>


	<script>
		Polymer('qi-twitter-panel',{

			ready: function(){
				this.addEventListener('openTweetDialog', function(){
					this.$.twitterDialog.open();
				});
			},

			openDialog: function(){
				this.$.twitterDialog.open();
			}
		
		});

	</script>

</polymer-element>