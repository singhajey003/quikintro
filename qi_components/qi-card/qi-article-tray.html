<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">

<link rel="import" href="qi-card-tray.html">
<link rel="import" href="qi-article-card.html">
<link rel="import" href="../data/qi-data-loader.html">

<dom-module id="qi-article-tray">

	<style is="custom-style">
	qi-card-tray{
		width: 100;
		background-color: var(--tray-bgcolor);
	}

	</style>



<template>
		
		
			<div class="fab-tray">
				
				<paper-fab icon="av:skip-previous" mini on-click="back"></paper-fab>
				<paper-fab icon="av:play-arrow" mini on-click="play"></paper-fab>
				<paper-fab icon="av:skip-next" mini on-click="fwd"></paper-fab>				
				<paper-fab icon="av:stop" mini on-click="stop"></paper-fab>

				<paper-fab icon="social:share" mini on-click="openShareDialog"></paper-fab>
			</div>

			<qi-card-tray id="cardtray">
			<template is="dom-repeat" items="[[news.feeds]]" index-as="i" as="feed">
				<span>[[feed.name]]</span>
				<template is="dom-repeat" items="[[feed.articles]]" as="article">
					<qi-article-card id="{{articleId}}"class="selectable-card" model="[[article]]" feed="[[feed]]"></qi-article-card>
				</template>

			</template>
			</qi-card-tray>



</template>

<script>
Polymer({
	is:'qi-article-tray',
	properties:{
		/**
		 * A JSON object containing all news feeds.
		 */
		news:{
			type: Object, 
			value: null, 
			notify: true, 
			readonly: true
		},

		/**
		 * A computed property that creates a unique article ID.
		 */
		articleId:{
			type: String,
			computed: 'getArticleId(id)'
		},

		selectedArticles: {
			type: Array,
			value: []
		}
	},

	/**
	 * A method that creates a unique article ID
	 */
	getArticleId: function(id){
		return "art-" + id;
	},

	/**
	 * This method displays the 
	 */
	openShareDialog: function(){
		console.log("share dialog");
	},

	play: function(){
		var cardtray = this.$.cardtray;
		var selected = cardtray.getSelected();
		for(var i=0; i < selected.length; i++){
			console.log("model: " + selected.model);
			this.selectedArticles.push(selected.model);
		}
		console.log("models: " + this.selectedArticles);
	},

	fwd: function(){

	},

	bck: function(){

	},

	stop: function(){
		
	}



});

</script>

</dom-module>