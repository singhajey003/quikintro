<!--
This behavior defines the properties and methods required of a card page.  This component consists of two pages. The first 
is a tray containing a number of cards. The second is a page
containing the details of a selected card.  Whenever the
user swipes the card, the page appears.  Whenever the user
swipes the page, the card tray appears.

To use this behavior, you must use the QiSwipeCardBehavior with the card, and the
QiSwipePageBehavior with the detail-page. 

@polymerBehavior QiTrayPageBehavior
-->
<script>
QiSwipeTrayBehavior = {

    properties: {

        /**
         * The index of the selected page.
         */
        selectedPage: {
            type: Number,
            value: 0
        },

        /**
         * The card model for the currently selected card.  This property must
         *  be bound to the detail-page.
         */
        cardModel: {
            type: Object,
            value: null,
            notify: true
        },

        detailpageid: {
            type: String,
            value: null
        }

    },

    ready: function() {

        var detailPageId = this.detailpageid;

        // this event is triggerend whenever the article card is swiped
        this.addEventListener('card-swipe', function(e) {
            if (detailPageId != null) {
                var detailPage = document.getElementById(detailPageId);
                detailPage.model = e.detail.model;
                this.selectedPage = 1;
                e.stopPropagation();
            } else {
                console.log("The detailPageId was null");
            }
        });

        this.addEventListener('page-swipe', function(e) {
            this.selectedPage = 0;
            e.stopPropagation();
        });


    }

}
</script>
