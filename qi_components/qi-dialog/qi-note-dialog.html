<link rel="import" href="../../bower_components/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<polymer-element name="qi-note-dialog" attributes="notes">

	<template>

		<paper-action-dialog id="dialog" heading="New Note" backdrop>
			<link rel="stylesheet" href="../quikintro.css" >
			<link rel="stylesheet" href="dialog.css">

			<div>
				<paper-input id="title" label="Title"></paper-input>
			</div>

			<div>
				<paper-input-decorator floatingLabel label="Note">
					<paper-autogrow-textarea id="a1">
						<textarea id="note" style="border: 0;"></textarea>
					</paper-autogrow-textarea>
				</paper-input-decorator>

			</div>
			
			<paper-button dismissive>Cancel</paper-button>
			<paper-button affirmative on-click="{{publishAction}}">Publish</paper-button>
		  
		</paper-action-dialog>

		
	</template>

	<script>
		Polymer('qi-note-dialog',{



			publishAction: function(){

				if(this.notes == null){
					this.notes = [];
				}

				var timeObj = new Date();

				var profile = JSON.parse(localStorage.getItem("profile"));
				var author = {
					"firstName":profile.firstName,
					"lastName":profile.lastName
				}

				note = {
					"title": this.$.title.value,
					"description": this.$.note.value,
					"author":author,
    				"time": timeObj.toDateString() + timeObj.toTimeString()
				};

				this.notes.push(note);
				

			},

			open: function(){
				this.reset();
				this.$.dialog.open();
			},

			reset: function(){
				this.$.title.value = '';
				this.$.note.value = '';
			}

		});

	</script>

</polymer-element>