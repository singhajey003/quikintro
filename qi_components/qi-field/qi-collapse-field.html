<!--
  This component is a decorator which can be used to create a collapsible field.

  <qi-collapse-field label="Description">
	<text-area></text-area>
  </qi-collapse>

  Creates a collapsible text area field.

	@group QI Elements
	@element qi-collapse-field
-->
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html"> 
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../qi-toggle/qi-toggle.html"> 

<dom-module id="qi-collapse-field">

<style>
.labelCell > label{
	vertical-align: bottom;
}
</style>

<template>
	<link rel="stylesheet" href="qi-field.css"> 

	<div class="layout vertical">
		<div class="row flex layout horizontal justified" > 

			<template is="dom-if" if="[[hasIcon]]">
				<iron-icon icon="[[icon]]"></iron-icon>
			</template>

			<template is="dom-if" if="[[hasLabel]]">
		        <div class="labelCell"><label><span>{{label}}</span></label></div>
		    </template>

	        <qi-toggle on-click="_handleClick"></qi-toggle>
	    </div>
	    
	    <iron-collapse id="collapse" opened="{{opened}}">
	    <content></content>
	    </iron-collapse>
	</div>

</template>

<script>
Polymer({
	is:'qi-collapse-field',
	properties:{
		
		/**
		 * The optional label to be displayed.
		 */
		label: {
			type: String,
			value: null
		},

		/**
		 * A field that indicates if there is a label
		 */
		hasLabel:{
			type: Boolean,
			computed: '_hasLabel(label)'
		},

		/**
		 * A flag that indicates if the collapse pane is open or closed
		 */
		opened: {
			type: Boolean, 
			value: false
		},

		/**
		 * The name of the icon or iconset name + icon name
		 */
		icon: {
			type: String,
			value: null
		},

		/**
		 * A field that indicates if there is an icon
		 */
		hasIcon: {
			type: Boolean,
			computed: '_hasIcon(icon)'
		}
	},

	/**
	 * Determines if the label is null
	 * @param label the label text
	 */
	_hasLabel: function(label){
		return label != null;
	},

	/**
	 * Determines if the icon is null
	 * @param icon the icon name
	 */
	_hasIcon: function(icon){
		return icon != null;
	},



	/**
	 * This method handles the click action of the collapse fields toggle button.
	 * @param the click event object
	 */
	_handleClick: function(e){
		this.opened != this.opened;
		this.$.collapse.toggle();
	}
});


</script>


</dom-module>