<link rel="import" href="../../bower_components/font-roboto/roboto.html" >
<link rel="import" href="../../bower_components/core-collapse/core-collapse.html" >
<link rel="import" href="../../bower_components/core-field/core-field.html" >

<link rel="import" href="../../bower_components/core-icon-button/core-icon-button.html" >
<link rel="import" href="../../bower_components/paper-input/paper-autogrow-textarea.html" >
<link rel="import" href="../../bower_components/paper-input/paper-input-decorator.html" >


<link rel="import" href="../../bower_components/core-tooltip/core-tooltip.html" >
<link rel="import" href="../../bower_components/polymer-ui-ratings/polymer-ui-ratings.html" >


<link rel="import" href="../qi-avatar/qi-avatar.html">
<link rel="import" href="../qi-text-list/qi-text-list.html">
<link rel="import" href="../qi-field/qi-field.html">
<link rel="import" href="../qi-field/qi-field-decorator.html">

<polymer-element name="qi-contact-card" attributes="contact visibility filter">

	
	<template>
	
	<link rel="stylesheet" href="../quikintro.css" >
	<link rel="stylesheet" href="../qi-cards.css" >

	<div class="card-wrapper">

		<div class="card card-photo">

			<qi-avatar url="{{contact.avatar}}"></qi-avatar>

			<header>
				<h3>{{contact.firstName}} {{contact.lastName}}</h3>
				<p class="title">{{contact.title}}</p>
				<p class="company">{{contact.company}}</p>
				<p></p>
			</header>

			<div class="summary" horizontal justified layout end>
				<core-tooltip label="Rate Contact"><polymer-ui-ratings value="{{contact.rating}}"></polymer-ui-ratings></core-icon></core-tooltip>
			</div>

			<div class="card-actions" horizontal justified layout center>
				<paper-button role="button" on-click="{{pingDialogLaunch}}">Message</paper-button>
				<paper-button role="button" on-click="{{mtgDialogLaunch}}">Create Meeting</paper-button>
				<qi-toggle isOpened="{{isOpen}}"></qi-toggle>
			</div>

			<core-collapse id="collapse" opened="{{isOpen}}">
			<div style="display: table">
			    <qi-field name="Company:" value="{{contact.company}}"></qi-field>
			 
			 	<qi-field name="Mobile:" value="{{contact.mobile}}"></qi-field>
			    <qi-field name="Office:" value="{{contact.office}}"></qi-field>
			    <qi-field name="Email:" value="{{contact.email}}"></qi-field>
			    <qi-field name="Address:" value="{{contact.address}}"></qi-field>
			    <qi-field-decorator name="Tags:">
			    	<qi-text-list list="{{contact.tags}}"></qi-text-list>
			    </qi-field-decorator>
			   
			    <qi-field-decorator name="Skills:">
			        <qi-text-list list="{{contact.skills}}"></qi-text-list>
			     </qi-field-decorator>

			    <qi-field-decorator name="Interests:">
			        <qi-text-list class="fldValue" list="{{contact.interests}}"></qi-text-list>
			    </qi-field-decorator>

			    <qi-field name="Notes:" value="{{contact.notes}}"></qi-field>
			  
			    <qi-field-decorator name="Food:">
			        <qi-text-list list="{{contact.food}}"></qi-text-list>
			    </qi-field-decorator>
			    <qi-field-decorator name="Drink:">
			        <qi-text-list list="{{contact.drink}}"></qi-text-list>
			    </qi-field-decorator>
			</div>
			</core-collapse>

		</div>
	</div>

	</template>

	<script>
	Polymer('qi-contact-card',{

		contact: null,
		
		visibility:'visible',
		isOpen: false,
		score: 0,
		filterChanged: function(oldFilter, newFilter){
			this.visibility = (this.score >= newFilter )? "visible":"hidden";
		},
		contactChanged: function(oldContact, newContact){
			this.score = newContact.score;
		},
	    

	    visibilityChanged: function(oldValue, newValue){
	     	this.$.card.style.display = (newValue == 'visible')?'block':'none';
	     },

	     setVisibility: function(vis){
	     	this.visibility = vis;
	     },

	     pingDialogLaunch: function(e){
	     	this.fire("openPingDialog",{contact:this.contact});
	     },

	     mtgDialogLaunch: function(e){
	     	this.fire("openMtgDialog",{contact:this.contact});
	     }




	    });


	</script>


</polymer-element>