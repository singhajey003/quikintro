<link rel="import" href="../../bower_components/font-roboto/roboto.html" >
<link rel="import" href="../../bower_components/core-collapse/core-collapse.html" >
<link rel="import" href="../../bower_components/core-field/core-field.html" >

<link rel="import" href="../../bower_components/core-icon-button/core-icon-button.html" >
<link rel="import" href="../../bower_components/paper-input/paper-autogrow-textarea.html" >


<link rel="import" href="../../bower_components/core-tooltip/core-tooltip.html" >
<link rel="import" href="../../bower_components/polymer-ui-ratings/polymer-ui-ratings.html" >


<link rel="import" href="../qi-avatar/qi-avatar.html">

<polymer-element name="qi-contact-card" attributes="contact visibility filter">

	
	<template>
	
		<link rel="stylesheet" href="qi-contact-card.css" >
    	<link rel="stylesheet" href="../quikintro.css" >
		<link rel="stylesheet" href="../qi-cards.css" >

	<div class="card-wrapper">

		<div id="card" class="card card-photo">

			<qi-avatar url="{{contact.gravatar}}"></qi-avatar>

			<header>
				<h3 id="titleBlock">{{contact.firstName}} {{contact.lastName}}</h3>
				<p class="title">{{contact.title}}</p>
				<p class="company">{{contact.company}}</p>
				<p></p>
			</header>

			<div class="summary" horizontal justified layout end>
				<core-tooltip label="Rate Contact"><polymer-ui-ratings value="{{contact.rating}}"></polymer-ui-ratings></core-icon></core-tooltip>
			</div>

			<div class="card-actions" horizontal justified layout center>
				<paper-button role="button" on-click="{{pingDialogLaunch}}">Message</paper-button>
				<paper-button role="button" on-click="{{mtgDialogLaunch}}">Create Meeting</paper-button>
				<qi-toggle isOpened="{{isOpen}}"></qi-toggle>
			</div>

			<core-collapse id="collapse" opened="{{isOpen}}">
			<core-field><label>Company:</label><span>{{contact.company}}</span></core-field>
			<core-field><label>Mobile:</label><span>{{contact.mobile}}</span></core-field>
			<core-field><label>Office:</label><span>{{contact.office}}</span></core-field>
			<core-field><label>Email:</label><span>{{contact.email}}</span></core-field>
			<core-field><label>Address:</label><span>{{contract.address}}</span></core-field>
			<core-field><label>Tags:</label><span>{{contact.tags}}</span></core-field>
			<core-field><label>Skills:</label><span>{{contact.skills}}</span></core-field>
			<core-field><label>Interests:</label><span>{{contact.interests}}</span></core-field>
			</core-collapse>

		</div>
	
		

	</div>

	</template>

	<script>
	Polymer('qi-contact-card',{

		contact: null,
		
		visibility:'visible',
		isOpen: false,
		score: 0,
		filterChanged: function(oldFilter, newFilter){
			this.visibility = (this.score >= newFilter )? "visible":"hidden";
		},
		contactChanged: function(oldContact, newContact){
			this.score = newContact.score;
		},
	    

	    visibilityChanged: function(oldValue, newValue){
	     	this.$.card.style.display = (newValue == 'visible')?'block':'none';
	     },

	     setVisibility: function(vis){
	     	this.visibility = vis;
	     },

	     pingDialogLaunch: function(e){
	     	this.fire("openPingDialog",{contactId:this.contact.id});
	     },

	     mtgDialogLaunch: function(e){
	     	this.fire("openMtgDialog",{contactId:this.contact.id});
	     }




	    });


	</script>


</polymer-element>