<!--
  TODO: core-field -> qi-field?

-->

<!-- <link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"> add  to top with other imports  -->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/core-field/core-field.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">


<link rel="import" href="../qi-global/global.html">
<link rel="import" href="../qi-dialog/qi-msg-dialog.html">
<link rel="import" href="../qi-dialog/qi-mtg-dialog.html">

<link rel="import" href="qi-contact-card.html">

<dom-module id='qi-contact-panel'  > 

 
  <template>

  <link rel="stylesheet" href="../quikintro.css"> 
  <link rel="stylesheet" href="qi-contact-panel.css"> 


 
  <paper-scroll-header-panel id="eventHeaderPanel" >

      <div class="search-panel">
        <div class="flex horizontal layout justified">  
          <div>Search</div>
          <qi-toggle on-click="collapseHandler"></qi-toggle> 
        </div>

        <iron-collapse id="searchPane">
        <core-field>
          <iron-icon icon="search"></iron-icon>
          <paper-input type="text" id="searchText" label="Search Text" ></paper-input>
        </core-field>

        <core-field>
          <iron-icon icon="loyalty"></iron-icon>
          <paper-input label="Tags" type="text" id="tags" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <iron-icon icon="communication:business"></iron-icon>
          <paper-input type="text" label="Company" id="company"></paper-input>
        </core-field>

        <core-field>
          <iron-icon icon="room"></iron-icon>
          <paper-input type="text" label="Location" id="location" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <iron-icon icon="work"></iron-icon>
          <paper-input type="text" label="Title" id="work" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <iron-icon icon="bookmark-outline"></iron-icon>
          <paper-input type="text" label="Interests" id="interests" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <iron-icon icon="label"></iron-icon>
          <paper-input type="text" id="skills" label="Skills"></paper-input>
        </core-field>

        <paper-button raised >Search</paper-button>
      </div>
      </iron-collapse>
    

    <div class="content layout vertical" >  
      
      <template is="dom-repeat" items="{{contacts}}"  as="contact">
        <qi-contact-card contact="{{contact}}"></qi-contact-card>
      </template>

      
      <qi-msg-dialog id="msgDialog"></qi-msg-dialog>
      <qi-mtg-dialog id="mtgDialog"></qi-mtg-dialog>
     
    </div>


     </paper-scroll-header-panel>
   </template>

   <script>
  Polymer({
      is: 'qi-contact-panel', 
      properties:{

        /**
         * An array of contact data
         */
        contacts:{type: Array, value: JSON.parse(localStorage.getItem("contacts"))},

        /** 
         * An array of messages
         */
        msgs: {type: Array, value: localStorage.getItem("msgs")}
      },

      ready: function(){
        var msgDialog = this.$.msgDialog;
        var mtgDialog = this.$.mtgDialog;

        // event fired when the user opens a ping dialog
        this.addEventListener('openPingDialog', function(e){
          msgDialog.contact = e.detail.contact;
          msgDialog.open();
        }),

        this.addEventListener('openMtgDialog', function(e){
          mtgDialog.contact = e.detail.contact;
          mtgDialog.open();
        })

      },

      collapseHandler: function(){
        this.$.searchPane.toggle();
      }


    
      });

   </script>

</dom-module> <!-- CONVERTED -->

<!-- CONVERSION NOTES TODO:
 Review code and look for: 
 - textContent binding from <div>First: {{first}}</div> TO First <span>{{first}}</span><br>
 - polymer-element default attributes such as tabindex="0" move to hostAttributes: {  tabindex: 0}
 - custom elements correct JSON quotes required, change from <my-element foo="{ 'title': 'Persuasion', 'author': 'Austen' }"> to </my-element> to <my-element foo="{ "title": "Persuasion", "author": "Austen" }"></my-element>
 - custom elements attribute use dash-case not camelCase, change from  <my-element fooBar= to <my-element foo-bar
 - Polymer( fix mixins use Behaviors after is: see https://www.polymer-project.org/1.0/docs/devguide/behaviors.html
 - Check layout attributes replaced by layout classes <div layout horizontal center>` to `<div class="layout horizontal center">, 
 - Cleanup class= 
 - Convert core- to iron- or paper- replacement elements at PolymerElements
 - Remove unresolved from <body> tag
 - Cleanup iron-ajax params url for embedded bindings {{}}
 - iron-ajax replace this.$.xxx_ajax.abort(); and this.$.xxx_ajax.go(); with this.$.xxx_ajax.generateRequest() 
 - Fix iron-list if needed 
 - Fix indentation as need 
 - Cleanup Comments to reflect changes ,
 - see https://www.polymer-project.org/1.0/docs/migration.html
   -->