<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-scroll-header-panel/core-scroll-header-panel.html">

<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/core-field/core-field.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../bower_components/core-icons/communication-icons.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-action-dialog.html">

<link rel="import" href="../qi-global/global.html">
<link rel="import" href="qi-contact-card.html">

<polymer-element name="qi-contact-panel" attributes="contacts">
  <template>

  <link rel="stylesheet" href="../quikintro.css">
  <link rel="stylesheet" href="qi-contact-panel.css">


 
	<core-scroll-header-panel headermargin="128" fixed  id="eventHeaderPanel" >
    

    <div class="content" layout vertical>
      <div class="search-panel">

        <core-field>
          <core-icon icon="search"></core-icon>
          <paper-input type="text" id="searchText" label="Search Text" ></paper-input>
        </core-field>

        <core-field>
          <core-icon icon="loyalty"></core-icon>
          <paper-input label="Tags" type="text" id="tags" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <core-icon icon="communication:business"></core-icon>
          <paper-input type="text" label="Company" id="company"></paper-input>
        </core-field>

        <core-field>
          <core-icon icon="room"></core-icon>
          <paper-input type="text" label="Location" id="location" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <core-icon icon="work"></core-icon>
          <paper-input type="text" label="Title" id="work" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <core-icon icon="bookmark-outline"></core-icon>
          <paper-input type="text" label="Interests" id="interests" floatingLabel="true"></paper-input>
        </core-field>

        <core-field>
          <core-icon icon="label"></core-icon>
          <paper-input type="text" id="skills" label="Skills"></paper-input>
        </core-field>

        <paper-button raised>Search</paper-button>
      </div>


      
      <template repeat="{{contact in contacts}}">
        <qi-contact-card contact="{{contact}}"></qi-contact-card>
      </template>

      <paper-action-dialog id="msgDialog" heading="Send Message" >
        <paper-input-decorator floatingLabel label="Message Text">
          <textarea id="msgText" name="msgText"></textarea>
        </paper-input-decorator>

        <paper-button dismissive>Cancel</paper-button>
        <paper-button affirmative>Send</paper-button>
      </paper-action-dialog>

    </div>


     </core-scroll-header-panel>
   </template>

   <script>
	Polymer('qi-contact-panel',{

      contacts:localStorage.getItem("contacts"),
      msgs: localStorage.getItem("msgs"),

      ready: function(){
        var msgDialog = this.$.msgDialog;

        // event fired when the user opens a ping dialog
        this.addEventListener('openPingDialog', function(e){
          msgDialog.open();
        });

        // event fired whenever the user sends a message
        this.addEventListener('core-overlay-close-completed', function(e){
          var msgText = null;
          var date = new Date();

          this.fire('msgSent',{sender:this.contacts[1],rcvrId:this.contacts[0], msg:msgText, tstamp:date});
    
        });

      }
		
	    });

   </script>

</polymer-element>