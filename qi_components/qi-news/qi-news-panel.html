<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="qi-feed-tray.html">
<link rel="import" href="qi-article-tray.html">
<link rel="import" href="qi-article-page.html">


<dom-module id="qi-news-panel">

	<style is="custom-style">
	.demotray{
		width: 100vw;
	}

	</style>

<template>
	
<!-- Enable if you need to initialize the data for this 
	<qi-data-loader></qi-data-loader>

-->


	<iron-localstorage name="news" value="{{news}}"></iron-localstorage>
	<iron-localstorage  name="feeds" value="{{feeds}}"></iron-localstorage>

	<iron-pages selected="{{selectedPage}}">
	
		<div class="demotray layout vertical">
			<qi-feed-tray model="[[feeds]]"></qi-feed-tray>
			<qi-article-tray news="{{news}}" ></qi-article-tray>
		</div>

		<div>
			<qi-article-page model="[[articleModel]]"></qi-article-page>
		</div>

	</iron-pages>

</template>

<script>
  Polymer({
  	is:'qi-news-panel',
  	properties: {
  		feeds: {
  			type: Array
  		},

  		news: {
  			type: Array
  		}, 
  		selectedPage: {
  			type: Number,
  			value: 0,
  			notify: true
  		},
  		articleModel: {
  			type: Object,
  			value: null
  		}
  	},

  	_displayPage: function(model){
  		this.articleModel = model;

  	},

  	ready: function(){

  		// this event is triggerend whenever the article card is swiped
  		this.addEventListener('card-swipe', function(e){
  			this.articleModel = e.detail.model;
  			this.selectedPage = 1;
        e.stopPropagation();
  		});

  		this.addEventListener('page-swipe', function(e){
        console.log("page swipe registered")
  			this.selectedPage = 0;
        e.stopPropagation();
  		});


  	}
  });

</script>


</dom-module>