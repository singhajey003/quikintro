<!--
  This component is responsible for rendering an article.
  
	@group QI Elements
	@element qi-article-page
-->
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"> 
<link rel="import" href="../qi-trait/qi-traitlist.html">
<link rel="import" href="qi-speech-behavior.html">

<dom-module id="qi-article-page">

	<style>
	.mediaholder{
		width: 100%;
		height: 150px;
		background-size: cover;
		back
	}
	.article-content{
		padding-left: 2px;
		overflow: scroll;
	}
	h2{
		font-weight: normal;
	}

	figcaption{
		font-size: 10pt;
		line-height: normal;
	}

	.abstract{
		overflow: scroll;
	}

	</style>


	<template>
	<div class="article-content" on-track="_handleSwipe">
	<h2><span>[[model.title]]</span></h2>

	<figure>
  		<div class="mediaholder flex" style$="[[media]]"></div>
  		<figcaption><span>[[desc]]</span></figcaption>
	</figure>

	<div class="flex">
	<qi-traitlist traits="[[model.keywords]]"></qi-traitlist>
	</div>
	

	<div id="abstract">[[cleanMessageText(model.abstract)]]</div>


	</div>
	</template>

	<script>
	Polymer({
		is: 'qi-article-page',
		behaviors: [QiSpeechBehavior],
		properties: {
			model:{
				type: Object,
				value: null
			},

			media:{
				type: String,
				computed: '_computeMedia(model)'
			},
			desc:{
				type: String,
				computed: '_computeDesc(model)'
			},
			height:{
				type: Number,
				computed: '_computeHeight(model)'
			},
			width:{
				type: Number,
				computed: '_computeWidth(model)'
			}
		},

		_computeWidth: function(model){
			return (model != null)? model.media[0].width:0;
		},

		_computeHeight: function(model){
			return (model != null)? model.media[0].height:0;
		},

		_computeMedia:function(model){
			return (model != null)? "background-image: url('" + model.media[0].url + "');" : "";
		},

		_computeDesc: function(model){
			return (model != null)?model.media[0].description : "";
		},

		_handleSwipe: function(e){
			this.fire('article-page-swipe',{});
		}




	});

	</script>


</dom-module>