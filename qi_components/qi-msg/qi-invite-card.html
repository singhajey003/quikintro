<!--
	This component displays invitation information.

	@group QI Elements
	@element qi-invite-card
-->

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"> 
<link rel="import" href="../../bower_components/paper-button/paper-button.html"> 

<link rel="import" href="../qi-avatar/qi-avatar.html">

<dom-module id='qi-invite-card' > 


	<link rel="stylesheet" href="qi-msg-card.css" > 
	<template>
		
		<div id="[[invId]]" class="card2 layout vertical justified" >
			<div class="layout horizontal" > 

				<div class="avatarBlock">
					<qi-avatar url="[[invite.sender.avatar]]"></qi-avatar> 
				</div>

				<div class="mainPanel">
					<div class="senderBlock">
						<span class="senderName">{{wholename}}</span>
					</div>
					<div class="msgBlock">[[invite.msg]]</div>
				</div>

			</div>

			<div class="buttons horizontal justified layout">
				<paper-button affirmative on-click="acceptAction">Accept</paper-button> 
				<paper-button dismissive on-click="declineAction">Decline</paper-button> 
			</div>

		</div>

	</template>

	<script>
	var InvCard = Polymer({
   		is: 'qi-invite-card', 

   		properties: {
   			/**
   			 * The numeric ID of the invitation.
   			 */
   			id: {
   				type: Number,
   				readonly: true
   			},

   			/**
   			 * The unique String version of the id, used for DOM manipulation.
   			 */
   			invId:{
   				type: String,
   				computed: 'concatId(id)'
   			},

   			/**
   			 * The model for the invitation.
   			 */
   			invite: {
   				type: Object, 
   				readonly: true
   			},

   			/**
   			 * The concatenated first and last names of the sender.
   			 */
   			wholename:{
   				type: String,
   				computed: 'concatName(invite.sender.firstName, invite.sender.lastName)'
   			}
   		},

   		/**
   		 * This method prefixes the ID.
   		 * @param id the ID of the invitation.
   		 */
   		concatId: function(id){
			return "inv-" + id;
		},

		/**
		 * This method concatenates the first and last name of the sender.
		 * @param firstName the first name of the sender
		 * @param lastName the last name of the sender
		 */
   		concatName: function(firstName, lastName){
   			return firstName + " " + lastName;
   		},

   		/**
   		 * This method is used to accept an invitation.
   		 */
		acceptAction: function(e){
			this.fire('show-toast',{text:'Invitation accepted.'});
		},

		/**
		 * This method is used to decline an invitation.
		 */
		declineAction: function(e){
			this.fire('show-toast',{text:'Invitation declined.'});
		}

	});

	</script>

</dom-module> 