<!--
 This component is a tray of mtg request cards.

 	@group QI Elements
 	@element qi-mtg-tray
-->
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">


<link rel="import" href="../qi-card/qi-swipe-card-tray.html">

<link rel="import" href="../qi-card/qi-tray-behavior.html">



<link rel="import" href="qi-mtg-card.html">
<link rel="import" href="qi-mtg-page.html">

<dom-module id="qi-mtg-tray">

	<style is="custom-style">
	qi-card-tray{
		--tray-width: 100vw;
		background-color: var(--tray-bgcolor);
	}


	</style>


	<template>


	<qi-swipe-card-tray id="mtgtray" detailpageid="mtg-page" fabtrayid="mtg-fab-tray">

		<!-- Cards -->
        <template is="dom-repeat" items="[[model]]" index-as="id" as="mtg">
            <qi-mtg-card class="selectable-card" model="[[mtg]]"></qi-mtg-card>
        </template>

        <!-- Detail Page -->
		<qi-mtg-page id="mtg-page" class="detail-page"></qi-mtg-page>


		<paper-fab class="selectable" icon="check" on-click="accept" mini></paper-fab>
		<paper-fab class="selectable" icon="close" on-click="decline" mini></paper-fab>

	</qi-swipe-card-tray>


	</template>

	<script>
	Polymer({
		is: 'qi-mtg-tray',

		properties:{
			selectedPage:{
				type: Number,
				value: 0
			},
			mtgModel:{
				type: Object,
				value: null
			}
		},

		_removeCards: function(){
			//TODO: implement the removal of selected cards.
		},


		accept: function(){
			this._removeCards();
			this.fire('show-toast',{text: 'Invitation(s) Accepted'});

		},

		deleted: function(){
			_removeCards();
			this.fire('show-toast', {text: 'Invitations(s) Deleted'});
		},

		_displayPage: function(model){
			this.articleModel = model;

		},

/*		
		ready: function(){

  		// this event is triggerend whenever the article card is swiped
  		this.addEventListener('card-swipe', function(e){
  			console.log("card swipped")
  			this.mtgModel = e.detail.model;
  			this.selectedPage = 1;
  			e.stopPropagation();
  		});

  		this.addEventListener('page-swipe', function(e){
  			console.log("page swiped ")
  			this.selectedPage = 0;
  			e.stopPropagation();
  		});


  	}
*/

	});


	</script>


</dom-module>