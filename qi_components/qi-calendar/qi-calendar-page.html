<!--
This component is responsible for displaying meeting information.

	@group QI Elements
 	@element qi-calendar-page
-->

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../qi-custom-icons/qi-icons.html">
<link rel="import" href="../qi-field/qi-date-field.html">
<link rel="import" href="../qi-field/qi-collapse-field.html">
<link rel="import" href="../qi-file/qi-file-tray.html">

<link rel="import" href="../qi-card/">

<link rel="import" href="qi-guest-card.html">

<dom-module id="qi-calendar-page">
	<style>
		:host {
			display: block;
		}

		.description{
			padding-left: 3px;
			font-size: 9pt;
			color: #707070;
		}

		header{
			color: white;
			background-color: #17aacf;
			height: 45px;
			padding-top: 10px;
			padding-left: 3px;
			vertical-align: middle;
		}

		.services{
			padding-left: 10px;
			padding-bottom: 10px;
			padding-top: 10px;
			text-align: center;
		}

		.services > iron-icon{
			--iron-icon-width: 40px;
			--iron-icon-height: 40px;
			color: #707070;
			padding-right: 20px;
		}


	</style>
	<template>
		<div class="flex" on-track="handlePageSwipe">
		<header>
			<span>[[model.title]]</span>
		</header>

		<qi-date-field icon="event" date="[[model.date]]" time="[[time]]"></qi-date-field>

		<div class="description">
			<span>[[model.description]]</span>
		</div>

		<div class="services center horizontal layout">
			<iron-icon icon="qi:uber"></iron-icon>
			<iron-icon icon="qi:opentable"></iron-icon>
			<iron-icon icon="qi:grubhub"></iron-icon>
		</div>

		<template is="dom-if" if="{{model.invitees.length > 0}}">
		<qi-collapse-field icon="social:people" label="Attendees">
			<template is="dom-repeat" items="[[model.invitees]" as="guest">
				<qi-guest-card model="[[guest]]"></qi-guest-card>
			</template>
		</qi-collapse-field>
		</template>

		<qi-collapse-field icon="work" label="Documents">
			<iron-localstorage name="files" value="{{files}}"></iron-localstorage>
			<qi-file-tray model="{{files}}"></qi-file-tray>
		</qi-collapse-field>

		</div>
	</template>
	<script>
		Polymer({
			is: 'qi-calendar-page',
			behaviors: [QiSwipePageBehavior],
			properties:{
				time: {
					model:{
						type: Object
					},

					time:{
						type: String,
						computed: '_concatTime(model.time.start, model.time.end)'
					}
				}
			},

			/**
			 * This method concatenates the start and end times
			 * @param start the start time
			 * @param end the end time
			 */
			_concatTime: function(start, end){
				return start + " - " + end;
			}
		});
	</script>
</dom-module>