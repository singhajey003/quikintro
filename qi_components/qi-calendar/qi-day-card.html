<!--
This component is responsible for displaying the meetings
for a given day.


	@group QI Elements
	@element qi-day-card
-->
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"> 

<link rel="import" href="qi-cal-behavior.html">

<link rel="import" href="qi-mtg-mini-card.html">

<dom-module id="qi-day-card">
	<style>
		:host {
			display: block;
		}
		.day{
			text-align: center;
		}

		.current-day{
			color: blue;
		}

		.mtg-tray{
			overflow: scroll;
		}
	</style>
	<template>
		<div class="layout horizontal">
			<div class="day">
			<span>[[day]]</span>
			<span>[[dayOfWeekStr]]</span>
			</div>

			<div class="mtg-tray layout vertical">
			
				<qi-mtg-mini-card model="[[model]]"></qi-mtg-mini-card>
			
			</div>
		</div>
	</template>
	<script>
		Polymer({
			is: 'qi-day-card',
			behaviors: [QiCalBehavior],
			properties:{
				model:{
					type: Object,
					notify: true,
					value: null,
					observer: '_modelChanged'
				},
				date: {
					type: Date,
					computed: '_computeDate(model.date)'
				},
				dayOfWeekStr:{
					type: String,
					value: '',
					computed: '_computeDayOfWeek(date)'
				},
				day:{
					type: Number,
					computed: '_computeDay(date)'
				}
			},

			_modelChanged: function(newValue, oldValue){
				console.log("new day card model: " + newValue);
			},

			_computeDayOfWeek: function(date){
				return this.dayOfWeek(date.getDay());
			},

			_computeDay: function(date){
				return date.getDate() + 1;
			},

			_computeDate: function(dateStr){
				return new Date(dateStr);
			},

			ready: function(){
				console.log("day card model: " + this.model);
			}
		});
	</script>
</dom-module>